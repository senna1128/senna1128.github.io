var c={},u,o,r=$("#container-publications");function d(){let i=0;for(let e=0;e<r[0].childElementCount;e++){let l=document.getElementById("container-publications").children[e],s=u?$(l).text().match(u):!0,n=o?$(l).is(o):!0;i+=s&&n}let t=i;i=1;for(let e=0;e<r[0].childElementCount;e++){let l=document.getElementById("container-publications").children[e],s=u?$(l).text().match(u):!0,n=o?$(l).is(o):!0;s&&n&&($(l.children[0].children[0]).text(t-i+1),i++)}}if(r.length){r.isotope({itemSelector:".isotope-item",percentPosition:!0,masonry:{columnWidth:".grid-sizer"},filter:function(){let t=$(this),e=u?t.text().match(u):!0,l=o?t.is(o):!0;return e&&l}});let i=$(".filter-search").keyup(m(function(){u=new RegExp(i.val(),"gi"),d(),r.isotope()}));$(".pub-filters").on("change",function(){let e=$(this)[0].getAttribute("data-filter-group");if(c[e]=this.value,o=f(c),d(),r.isotope(),e==="pubtype"){let l=$(this).val();l.substr(0,9)===".pubtype-"?window.location.hash=l.substr(9):window.location.hash=""}})}function m(i,t){let e;return t=t||100,function(){clearTimeout(e);let s=arguments,n=this;function a(){i.apply(n,s)}e=setTimeout(a,t)}}function f(i){let t="";for(let e in i)t+=i[e];return t}function h(){if(!r.length)return;let i=window.location.hash.replace("#",""),t="*";i!=""&&!isNaN(i)&&(t=".pubtype-"+i);let e="pubtype";c[e]=t,o=f(c),d(),r.isotope(),$(".pubtype-select").val(t)}document.addEventListener("DOMContentLoaded",function(){$(".pub-filters-select")&&h(),$(".js-cite-modal").click(function(i){i.preventDefault();let t=$(this).attr("data-filename"),e=$("#modal");e.find(".modal-body code").load(t,function(l,s,n){if(s=="error"){let a="Error: ";$("#modal-error").html(a+n.status+" "+n.statusText)}else $(".js-download-cite").attr("href",t)}),e.modal("show")}),$(".js-copy-cite").click(function(i){i.preventDefault();let t=document.querySelector("#modal .modal-body code").innerHTML;navigator.clipboard.writeText(t).then(function(){console.debug("Citation copied!")}).catch(function(){console.error("Citation copy failed!")})})});
